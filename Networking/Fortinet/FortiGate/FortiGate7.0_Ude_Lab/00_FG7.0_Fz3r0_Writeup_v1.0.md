# Fz3r0 Operations: FortiGate 7.0 @ El camino al NSE4
#### Keywords: `Networking` `Security` `NSE4` `FortiGate` `Fortinet` `Blue Team` `Next Generation Firewall` `FortIOS` `InfoSec`

![My Video](https://user-images.githubusercontent.com/94720207/165892585-b830998d-d7c5-43b4-a3ad-f71a07b9077e.gif)
_Writeup by [Fz3r0 üíÄ](https://github.com/Fz3r0/)_

### Contact

- **Github**  : [Fz3r0](https://github.com/fz3r0) 
- **Twitter**  : [@fz3r0_OPs](https://twitter.com/Fz3r0_OPs) 
- **Youtube**  : [@Fz3r0_OPs](https://www.youtube.com/Fz3r0_OPs) 

## Index 

![image](https://user-images.githubusercontent.com/94720207/208320431-e5d981bd-1ca3-4e4f-ba26-c1ef0e20a1a1.png)

### FortiGate 7.0 - El camino al NSE4:

- [Parte 1 - Armando el Lab](https://github.com/Fz3r0/Fz3r0/blob/main/Networking/Fortinet/FortiGate/FortiGate7.0_Ude_Lab/00_FG7.0_Fz3r0_Writeup_v1.0.md#fortigate-70---parte-1---armando-el-lab)


## FortiGate 7.0 - `Parte 1` - Armando el Lab

### Configurar GNS3

#### OJO! El `Cliente - GNS3.exe` es el **UI ejecutable** del GNS3, el `Server - GNS3-VM`  es la pantalla azul del **VMWare** ;)

1. Abrir el `Servidor` GNS3-VM primero desde el VMware hasta llegar a este di√°logo.
- Importante que se vean los datos de IP y puerto 80, as√≠ como user y pass

![image](https://user-images.githubusercontent.com/94720207/208322267-b66bc5df-a62b-4eb5-91f6-7666a22da4ac.png)

2. Ahora hay que enlazar cliente con servidor: Abrir el `Cliente` y configurar lo siguiente:

![image](https://user-images.githubusercontent.com/94720207/208322556-96a590b2-790b-410f-a7cd-d545acf3c0fa.png)

![image](https://user-images.githubusercontent.com/94720207/208322704-398be835-e5a8-4030-9d95-06e4bbbbe6a9.png)

3. Al hacer click en "aceptar" quiz√°s mande una serie de errores, posiblemente habr√° que rieniciar GNS3 a mano, pero al final saldr√° `Main Server`:

![image](https://user-images.githubusercontent.com/94720207/208322804-21fe029a-56b5-45f4-857b-d47ef78029cb.png)

- Al reiniciar GNS3:

![image](https://user-images.githubusercontent.com/94720207/208322837-43e48f87-2707-411f-beb5-c8a792b672c3.png)

---

### Importar el Laboratiorio:

1. Importar el File `*.gns3project` con `import portable project`

![image](https://user-images.githubusercontent.com/94720207/208314821-d99a7de2-1939-4cbe-a36d-52021623cac5.png)
![image](https://user-images.githubusercontent.com/94720207/208314905-46b4ee5d-38d9-4103-81aa-d439c99a6906.png)

-  En caso de marcar error de QEMU al faltar files, puede ser el Windows Server:

![image](https://user-images.githubusercontent.com/94720207/208319997-e093cdb6-7c31-4055-9f96-4bea6ea65eb4.png)

- Descarger Windows Server 2012 ver: `Win2k12_9600.16415.amd64fre.winblue_refresh.130928-2229_server_serverdatacentereval_en-us.vhd'`
    - https://www.microsoft.com/en-us/evalcenter/download-windows-server-2012-R2

- Poner en la carpeta de `\Laboratorio_Forti_Udemy02\LAB_Fz3r0_FG7\images\QEMU\`

![image](https://user-images.githubusercontent.com/94720207/208322461-f1f03284-e04b-4cea-81c7-94e18c331c55.png)

2. As√≠ se debe ver el proceso de carga en las diferentes ventanas:

![image](https://user-images.githubusercontent.com/94720207/208323113-2b86218a-d4c5-4c5e-aaf9-917b108cd734.png)

- **OJO!!! La carga del proytecto es lenta, quiz√°s tarde varios loops en `searching for server`, ser paciente...**

3. Al final despu√©s de varios ajustes de tama√±os y pantalla a gusto de cada quien se ver√° el laboratiorio:

![image](https://user-images.githubusercontent.com/94720207/208325045-0d769c80-9aa7-4ca1-8c96-5eb4f60bfed7.png)

--- 

### Tomar Snapshot `Init`

- Ojo: De la misma manera tomar snapshots constants:

1. Manage Snapshot

![image](https://user-images.githubusercontent.com/94720207/208325124-75c9b3aa-b9b8-4452-b1fe-2863747b2a4e.png)

2. Create

![image](https://user-images.githubusercontent.com/94720207/208325171-d8945ae2-16a8-4c2e-b3ff-fbb88246c925.png)

3. Esperar a la creaci√≥n del snapshot:

![image](https://user-images.githubusercontent.com/94720207/208325209-40b94240-33c6-4067-ab33-f2d21c10bc2a.png)

![image](https://user-images.githubusercontent.com/94720207/208325391-81d684ac-fa1d-4258-80ff-cc1fbabc48f2.png)

## FortiGate 7.0 - `Parte 2` - Iniciando por primera vez el FortiGate

### FortiGate Default Settings

![image](https://user-images.githubusercontent.com/94720207/208325318-af19c877-77d1-4993-aa58-11e72c7a7d9e.png)

- Ojo: La IP fija default solo viene en equipos reales, en la VM viene por DHCP

### Entrar por CLI por consola al FG de `Site A`

- Entrar y usar credenciales default `admin:admin`

![image](https://user-images.githubusercontent.com/94720207/208325553-5abc5d5d-41fa-49e1-91f1-e8382b84bc87.png)

- `get system interface`

![image](https://user-images.githubusercontent.com/94720207/208325716-6cb3ec3b-64c5-4a3e-b31c-44dd402b32ea.png)

- En mi caso estos son los datos, es importante guardar la IP:

```
[ port1 ]

name: port1   
mode: dhcp    
ip:   192.168.14.133 / 255.255.255.0
```

### Editar Interface `Port 1` y entrar a la UI via web

```
# entra a la config de la interface:
config system interface

# edita puerto 1
edit port1

# permitir acceso httP
append allowaccess http

# muestra las propiedades del puerto 1:
show

# guardar y salir del puerto 1:
end


```

- Entrar por web desde la PC Master Race que estemos usando (Fuera de VMs y GNS3, osea tu compu!!!): `192.168.14.133` 

![image](https://user-images.githubusercontent.com/94720207/208326319-9ff4b7bd-c290-41aa-8894-0c6b7ad77eb0.png)

- Dashboard:

![image](https://user-images.githubusercontent.com/94720207/208326522-64b071db-359e-47f3-a18a-b6f4b13c4e00.png)











---





---

### Layer 2 MAC Flooding & ARP Spoofing

- **Before anything else!**
    


## Comandos del Padrino

### `get`

- `get system interface`

### `config`

- `config system interface`

### Conclusions & Proof of Concept



---

<span align="center"> <p align="center"> ![giphy](https://user-images.githubusercontent.com/94720207/166587250-292d9a9f-e590-4c25-a678-d457e2268e85.gif) </p> </span> 



&nbsp;

<span align="center"> <p align="center"> _Don't forget to enjoy your days..._ </p> </span> 
<span align="center"> <p align="center"> _...It's getting dark..._ </p> </span> 

&nbsp;

<span align="center"> <p align="center"> _Maybe we're all cursed. From the moment we're born..._ </p> </span> 

&nbsp;

<span align="center"> <p align="center"> _In the mist of the night you could see me come, where shadows move and Demons lie..._ </p> </span> 
<span align="center"> <p align="center"> _I am [Fz3r0 üíÄ](https://github.com/Fz3r0/) and the Sun no longer rises..._ </p> </span> 

---

## Recursos

- https://www.udemy.com/course/fortinet-7-de-principiante-a-experto

---

> ![hecho en mexico 5](https://user-images.githubusercontent.com/94720207/166068790-fa1f243d-2db9-4810-a6e4-eb3c4ad23700.png)
>
> _- Hecho en M√©xico - by [Fz3r0 üíÄ](https://github.com/Fz3r0/)_  
>
> _"In the mist of the night you could see me come, where shadows move and Demons lie..."_ 


